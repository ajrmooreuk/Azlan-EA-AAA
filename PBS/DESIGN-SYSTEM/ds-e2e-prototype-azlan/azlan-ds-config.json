{
  "@context": "https://platformcore.io/context/ds-config/v1",
  "@type": "DesignSystemConfiguration",
  "@id": "azlan-ds-e2e-config",
  "name": "Azlan DS-E2E Test Configuration",
  "description": "Isolated DS-E2E test environment for PFI-BAIV-Product-Azlan",
  "version": "1.0.0",
  "created": "2026-01-30",

  "deploymentContext": {
    "pfiInstance": "PFI-BAIV",
    "productName": "Azlan",
    "repoUrl": "https://github.com/ajrmooreuk/Azlan-EA-AAA",
    "branch": "main",
    "environment": "test",
    "isolation": "full"
  },

  "designSystemSource": {
    "brand": "BAIV",
    "tokensPath": "./tokens/baiv-tokens.css",
    "providerPath": "./tokens/baiv-tokens.tsx",
    "ontologyPath": "./design-system-ontology-v1.0.0.json",
    "figmaFileKey": "bXCyfNwzc8Z9kEeFIeIB8C",
    "figmaFileName": "BAIV Figma Variables v3"
  },

  "brandSwitching": {
    "enabled": true,
    "supportedBrands": [
      {
        "brandId": "baiv",
        "brandName": "Be AI Visible",
        "tokensFile": "baiv-tokens.css",
        "providerFile": "baiv-tokens.tsx",
        "active": true
      },
      {
        "brandId": "w4m",
        "brandName": "Work4Me",
        "tokensFile": "w4m-tokens.css",
        "providerFile": "w4m-tokens.tsx",
        "active": false,
        "status": "placeholder"
      },
      {
        "brandId": "azlan-pfc",
        "brandName": "Azlan PFC",
        "tokensFile": "azlan-pfc-tokens.css",
        "providerFile": "azlan-pfc-tokens.tsx",
        "active": false,
        "status": "placeholder"
      }
    ],
    "switchMechanism": "env-variable",
    "envVarName": "DS_ACTIVE_BRAND"
  },

  "supabaseConfig": {
    "note": "Configure with your own free-tier Supabase project for testing",
    "envVars": {
      "NEXT_PUBLIC_SUPABASE_URL": "${AZLAN_SUPABASE_URL}",
      "NEXT_PUBLIC_SUPABASE_ANON_KEY": "${AZLAN_SUPABASE_ANON_KEY}",
      "SUPABASE_SERVICE_ROLE_KEY": "${AZLAN_SUPABASE_SERVICE_KEY}"
    },
    "tables": [
      "design_system",
      "design_tokens",
      "token_versions",
      "brand_variants"
    ]
  },

  "e2eWorkflow": {
    "stages": [
      {
        "stage": 1,
        "name": "Figma Extraction",
        "description": "Extract tokens from Figma via MCP",
        "status": "ready",
        "artifacts": ["tokens/*.css", "tokens/*.tsx"]
      },
      {
        "stage": 2,
        "name": "Supabase Setup",
        "description": "Create DB tables and functions",
        "status": "pending",
        "blockedBy": "Supabase project creation"
      },
      {
        "stage": 3,
        "name": "Token Store",
        "description": "Load tokens into Supabase JSONB",
        "status": "pending",
        "dependsOn": ["stage-2"]
      },
      {
        "stage": 4,
        "name": "React Integration",
        "description": "Provider + hooks + CSS injection",
        "status": "ready",
        "artifacts": ["tokens/baiv-tokens.tsx"]
      },
      {
        "stage": 5,
        "name": "Component Rendering",
        "description": "Token-driven components",
        "status": "pending",
        "dependsOn": ["stage-3", "stage-4"]
      },
      {
        "stage": 6,
        "name": "Brand Switching Test",
        "description": "Switch between BAIV/W4M/Azlan-PFC",
        "status": "future",
        "dependsOn": ["stage-5"]
      }
    ]
  },

  "testing": {
    "isolationLevel": "full",
    "testTypes": ["unit", "integration", "e2e"],
    "coverageTarget": 80,
    "brandSwitchTests": true
  },

  "relatedDocs": {
    "implementationPlan": "./ds-e2e-implementation-plan.md",
    "productionArchitecture": "./baiv-production-architecture-consolidated.md",
    "skillsPlan": "./baiv-design-system-skills-plan.md",
    "e2eGuide": "./baiv-design-system-e2e-to-production.md"
  },

  "azlanSpecificNotes": [
    "This is an ISOLATED test environment - changes here don't affect PF-Core-BAIV",
    "Use your own Supabase free-tier project for database testing",
    "BAIV tokens are the default design system - can swap to W4M for multi-brand testing",
    "Azlan serves as PFI-BAIV-Product test bed before production deployment"
  ]
}
